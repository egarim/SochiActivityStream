@page "/customers"
@inherits MvvmComponentBase<CustomerListViewModel>
@rendermode InteractiveServer

<PageTitle>@VM.Title</PageTitle>

<div class="container-fluid py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>@VM.Title</h3>
        <CommandButton Command="@VM.RefreshCommand" CssClass="btn btn-secondary">
            Refresh
        </CommandButton>
    </div>

    @if (VM.IsBusy)
    {
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Loading customers...</p>
        </div>
    }
    else if (VM.Customers?.Any() == true)
    {
        <div class="table-responsive">
            <table class="table table-hover">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>City</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var customer in VM.Customers)
                    {
                        <tr class="@(VM.SelectedCustomer == customer ? "table-active" : "")"
                            @onclick="() => VM.SelectedCustomer = customer">
                            <td>@customer.Id</td>
                            <td>@customer.FullName</td>
                            <td>@customer.Email</td>
                            <td>@customer.Phone</td>
                            <td>@customer.City</td>
                            <td>
                                <CommandButton Command="@VM.NavigateToDetailCommand"
                                               CommandParameter="@customer"
                                               CssClass="btn btn-sm btn-primary">
                                    View
                                </CommandButton>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div class="alert alert-info">
            No customers found.
        </div>
    }
</div>
