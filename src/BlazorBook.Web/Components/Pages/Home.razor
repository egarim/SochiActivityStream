@page "/"
@inherits MvvmComponentBase<HomeViewModel>
@inject ICurrentUserService CurrentUser
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>BlazorBook - Where Friends Connect</PageTitle>

@if (CurrentUser.IsAuthenticated)
{
    <Feed />
}
else
{
    <div class="bb-landing-page">
        <div class="bb-landing-container">
            <!-- Left Side: Hero Content -->
            <div class="bb-hero-section">
                <MudText Typo="Typo.h2" Class="bb-hero-title">
                    BlazorBook
                </MudText>
                <MudText Typo="Typo.h6" Class="bb-hero-subtitle">
                    Connect with friends and share moments that matter.
                </MudText>
                
                <!-- Optional: Add illustration or features -->
                <div class="bb-hero-features mt-6">
                    <div class="bb-feature-item">
                        <MudIcon Icon="@Icons.Material.Filled.People" Class="bb-feature-icon" />
                        <MudText Typo="Typo.body1">Connect with friends and family</MudText>
                    </div>
                    <div class="bb-feature-item">
                        <MudIcon Icon="@Icons.Material.Filled.Share" Class="bb-feature-icon" />
                        <MudText Typo="Typo.body1">Share photos and updates</MudText>
                    </div>
                    <div class="bb-feature-item">
                        <MudIcon Icon="@Icons.Material.Filled.Message" Class="bb-feature-icon" />
                        <MudText Typo="Typo.body1">Message anyone, anytime</MudText>
                    </div>
                </div>
            </div>
            
            <!-- Right Side: Login Card -->
            <div class="bb-login-section">
                <MudPaper Class="bb-login-card" Elevation="3">
                    <MudText Typo="Typo.h5" Class="mb-4" Style="font-weight: 600;">Log in to BlazorBook</MudText>
                    
                    <div class="bb-login-actions">
                        <a href="/login" class="mud-button-filled mud-button-root mud-button-filled-primary bb-login-btn">
                            <span class="mud-button-label">Log In</span>
                        </a>
                        
                        <MudDivider Class="my-4" />
                        
                        <a href="/signup" class="mud-button-filled mud-button-root mud-button-filled-success bb-signup-btn">
                            <span class="mud-button-label">Create New Account</span>
                        </a>
                    </div>
                </MudPaper>
                
                <MudText Typo="Typo.caption" Class="bb-footer-text mt-4" Align="Align.Center">
                    Demo social network powered by Sochi.Navigation
                </MudText>
            </div>
        </div>
    </div>
}

@code {
    protected override Task OnInitializedAsync()
    {
        if (CurrentUser.IsAuthenticated)
        {
            Navigation.NavigateTo("/feed", replace: true);
        }

        return base.OnInitializedAsync();
    }
}
