@* SignUp Content Component - Reusable sign-up form UI *@
@using SocialKit.Components.ViewModels

<div class="sk-auth-container d-flex justify-content-center align-items-center" style="min-height:80vh;">
    <MudCard Class="sk-auth-card" Style="max-width:420px;width:100%;" Elevation="2">
        <MudCardContent>
            <div class="p-4">
                <div class="text-center mb-4">
                    @if (LogoContent != null)
                    {
                        @LogoContent
                    }
                    else
                    {
                        <MudText Typo="Typo.h4">Create Account</MudText>
                        <MudText Typo="Typo.body2" Class="mud-text-secondary">It's quick and easy.</MudText>
                    }
                </div>
                
                <EditForm Model="@ViewModel" OnValidSubmit="@(() => ViewModel.SignUpCommand.ExecuteAsync(null))">
                    @if (!string.IsNullOrEmpty(ViewModel.ErrorMessage))
                    {
                        <MudAlert Severity="Severity.Error" Class="mb-3">
                            @ViewModel.ErrorMessage
                        </MudAlert>
                    }
                    
                    <MudTextField @bind-Value="@ViewModel.DisplayName"
                                  id="signup-displayname"
                                  Placeholder="Display Name"
                                  Variant="Variant.Outlined"
                                  Class="mb-3"
                                  FullWidth="true" />
                    
                    <MudTextField @bind-Value="@ViewModel.Handle"
                                  id="signup-username"
                                  Placeholder="Username"
                                  Variant="Variant.Outlined"
                                  Class="mb-3"
                                  FullWidth="true" />
                    
                    <MudTextField @bind-Value="@ViewModel.Email"
                                  id="signup-email"
                                  Placeholder="Email address"
                                  Variant="Variant.Outlined"
                                  Class="mb-3"
                                  FullWidth="true" />
                    
                    <MudTextField @bind-Value="@ViewModel.Password"
                                  id="signup-password"
                                  Placeholder="Password (min 6 characters)"
                                  InputType="InputType.Password"
                                  Variant="Variant.Outlined"
                                  Class="mb-3"
                                  FullWidth="true" />
                    
                    <MudButton id="signup-button"
                               ButtonType="ButtonType.Submit"
                               Color="Color.Success"
                               Variant="Variant.Filled"
                               FullWidth="true"
                               Size="Size.Large"
                               Class="mb-3"
                               Disabled="@ViewModel.IsBusy">
                        @(ViewModel.IsBusy ? "Signing up..." : "Sign Up")
                    </MudButton>
                </EditForm>
                
                <MudDivider Class="my-3" />
                
                <div class="text-center">
                    <MudButton Variant="Variant.Text"
                               OnClick="@(() => ViewModel.NavigateToLoginCommand.ExecuteAsync(null))">
                        Already have an account?
                    </MudButton>
                </div>
            </div>
        </MudCardContent>
    </MudCard>
</div>

@code {
    [Parameter, EditorRequired] public SignUpViewModel ViewModel { get; set; } = null!;
    [Parameter] public RenderFragment? LogoContent { get; set; }
}
