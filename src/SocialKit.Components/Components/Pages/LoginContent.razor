@* Login Content Component - Reusable login form UI *@
@using SocialKit.Components.ViewModels

<div class="sk-auth-container d-flex justify-content-center align-items-center" style="min-height:80vh;">
    <MudCard Class="sk-auth-card" Style="max-width:420px;width:100%;" Elevation="2">
        <MudCardContent>
            <div class="p-4">
                <div class="text-center mb-4">
                    @if (LogoContent != null)
                    {
                        @LogoContent
                    }
                    else
                    {
                        <MudText Typo="Typo.h4">Welcome</MudText>
                    }
                </div>
                
                <MudAlert Severity="Severity.Info" Class="mb-3" Dense="true">
                    <strong>Demo:</strong> alice@("@")example.com / Demo123!@("@")#
                </MudAlert>
                
                <EditForm Model="@ViewModel" OnValidSubmit="@(() => ViewModel.LoginCommand.ExecuteAsync(null))">
                    @if (!string.IsNullOrEmpty(ViewModel.ErrorMessage))
                    {
                        <MudAlert Severity="Severity.Error" Class="mb-3">
                            @ViewModel.ErrorMessage
                        </MudAlert>
                    }
                    
                    @if (!string.IsNullOrEmpty(ViewModel.DebugMessage))
                    {
                        <MudAlert Severity="Severity.Info" Class="mb-3">
                            <strong>Debug:</strong> @ViewModel.DebugMessage
                        </MudAlert>
                    }
                    
                    <MudTextField @bind-Value="@ViewModel.Email"
                                  id="login-email"
                                  Placeholder="Email address"
                                  Variant="Variant.Outlined"
                                  Class="mb-3"
                                  FullWidth="true" />
                    
                    <MudTextField @bind-Value="@ViewModel.Password"
                                  id="login-password"
                                  Placeholder="Password"
                                  InputType="InputType.Password"
                                  Variant="Variant.Outlined"
                                  Class="mb-3"
                                  FullWidth="true" />
                    
                    <MudButton id="login-button"
                               ButtonType="ButtonType.Submit"
                               Color="Color.Primary"
                               Variant="Variant.Filled"
                               FullWidth="true"
                               Size="Size.Large"
                               Class="mb-3"
                               Disabled="@ViewModel.IsBusy">
                        @(ViewModel.IsBusy ? "Logging in..." : "Log In")
                    </MudButton>
                </EditForm>
                
                <MudDivider Class="my-3" />
                
                <div class="text-center">
                    <MudText Typo="Typo.body2" Class="mud-text-secondary mb-2">Don't have an account?</MudText>
                    <MudButton id="create-account-button"
                               Color="Color.Success"
                               Variant="Variant.Filled"
                               FullWidth="true"
                               Size="Size.Large"
                               Class="mb-3"
                               OnClick="@(() => ViewModel.NavigateToSignUpCommand.ExecuteAsync(null))">
                        Create New Account
                    </MudButton>

                    <MudText Typo="Typo.body2" Class="mud-text-secondary mt-2">
                        <a href="/forgot-password" class="mud-link">Forgot Password?</a>
                    </MudText>
                </div>
            </div>
        </MudCardContent>
    </MudCard>
</div>

@code {
    [Parameter, EditorRequired] public LoginViewModel ViewModel { get; set; } = null!;
    [Parameter] public RenderFragment? LogoContent { get; set; }
}
