@* Confirm Dialog using DevExpress DxPopup *@
@using Sochi.Navigation.Dialogs

<DxCard>
    <HeaderTemplate>
        <div class="p-3 pb-0">
            <h5 class="mb-0">@Title</h5>
        </div>
    </HeaderTemplate>
    <BodyTemplate>
        <div class="p-3">
            <p>@Message</p>
        </div>
    </BodyTemplate>
    <FooterTemplate>
        <div class="d-flex justify-content-end gap-2 p-3 pt-0">
            <DxButton Text="Cancel"
                      RenderStyle="ButtonRenderStyle.Secondary"
                      Click="Cancel" />
            <DxButton Text="Confirm"
                      RenderStyle="ButtonRenderStyle.Primary"
                      Click="Confirm" />
        </div>
    </FooterTemplate>
</DxCard>

@code {
    [Parameter] public IDialogParameters? Parameters { get; set; }
    [Parameter] public EventCallback<IDialogResult> OnClose { get; set; }
    
    private string Title => Parameters?.GetValue<string>("Title") ?? "Confirm";
    private string Message => Parameters?.GetValue<string>("Message") ?? "Are you sure?";
    
    private async Task Confirm()
    {
        var result = DialogResult.Ok();
        await OnClose.InvokeAsync(result);
    }
    
    private async Task Cancel()
    {
        var result = DialogResult.Cancel();
        await OnClose.InvokeAsync(result);
    }
}
